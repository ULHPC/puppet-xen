# <%= domU_configfile %>
# Configuration file for the Xen instance <%= domU_hostname %> 
#
################################################################################
# /!\ DO NOT EDIT THIS FILE: It has been automatically generated by Puppet.    #
#   In particular, any further changes will be overwritten at the next puppet  #
#   invocation                                                                 #
################################################################################

#
#  Kernel + memory size
#

bootloader = '/usr/bin/pygrub'

vcpus       = '<%= vcpus  %>'
memory      = '<%= memory %>'

#
#  Disk device(s).
#
root        = '/dev/xvda2 ro'
disk        = [
                  'phy:/dev/mapper/<%= scope.lookupvar('xen::dom0::domU_lvm') %>-<%= domU_hostname %>-disk,xvda2,w',
                  'phy:/dev/mapper/<%= scope.lookupvar('xen::dom0::domU_lvm') %>-<%= domU_hostname %>-swap,xvda1,w',
              ]


#
#  Physical volumes
#


#
#  Hostname
#
name        = '<%= domU_hostname %>'

#
#  Networking
#
vif         = [ 'ip=<%= ip %>,mac=00:16:3E:9D:1C:55,bridge=breth1' ]

#
#  Behaviour
#
on_poweroff = 'destroy'
on_reboot   = 'restart'
on_crash    = 'restart'

